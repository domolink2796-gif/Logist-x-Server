module.exports = function(app, ctx) {
    const { sheets, drive, readDatabase } = ctx;
    
    // –≠—Ç–æ—Ç –ª–æ–≥ –ø–æ–∫–∞–∂–µ—Ç –Ω–∞–º –≤ Railway, —á—Ç–æ –ø–ª–∞–≥–∏–Ω –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –∏ –ù–ï –ø–∞–¥–∞–µ—Ç
    console.log("‚òÄÔ∏è –ü–õ–ê–ì–ò–ù –°–û–õ–ù–¶–ï: –ë–∞–∑–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞");

    // –ü—É—Å—Ç–æ–π –º–∞—Ä—à—Ä—É—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤—è–∑–∏
    app.get('/ping-merch', (req, res) => {
        res.send("–ü–ª–∞–≥–∏–Ω –°–æ–ª–Ω—Ü–µ –Ω–∞ —Å–≤—è–∑–∏!");
    });

    // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    app.post('/save-partial-stock', async (req, res) => {
        try {
            const { key, addr, item, userName } = req.body;
            console.log(`üì• –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø–∏—Å–∏: ${item.name} –æ—Ç ${userName}`);
            
            // –ú—ã –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–µ–º "–û–ö", —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –¥–æ—Ö–æ–¥–∏—Ç –ª–∏ —Å–∏–≥–Ω–∞–ª —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            res.sendStatus(200);
        } catch (e) {
            console.error("–û—à–∏–±–∫–∞:", e.message);
            res.status(500).send(e.message);
        }
    });
};
